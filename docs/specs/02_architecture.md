# Aetherius AI Agent - ç³»ç»Ÿæ¶æ„è®¾è®¡

> **æ–‡æ¡£ç‰ˆæœ¬**: v1.6
> **æœ€åæ›´æ–°**: 2025å¹´9æœˆ28æ—¥
> **è¯»è€…å¯¹è±¡**: ç³»ç»Ÿæ¶æ„å¸ˆã€å¼€å‘å·¥ç¨‹å¸ˆ

---

## ç›®å½•

- [1. æ¶æ„æ€»è§ˆ](#1-æ¶æ„æ€»è§ˆ)
- [2. æ ¸å¿ƒç»„ä»¶](#2-æ ¸å¿ƒç»„ä»¶)
- [3. å¤šé›†ç¾¤æ¶æ„](#3-å¤šé›†ç¾¤æ¶æ„)
- [4. æ•°æ®æµæ¶æ„](#4-æ•°æ®æµæ¶æ„)
- [5. å®‰å…¨æ¶æ„](#5-å®‰å…¨æ¶æ„)
- [6. å…³é”®è®¾è®¡å†³ç­–](#6-å…³é”®è®¾è®¡å†³ç­–)

---

## 1. æ¶æ„æ€»è§ˆ

### 1.1 ç³»ç»Ÿæ¶æ„å›¾

> **æƒå¨æ¥æº**: å®Œæ•´æ¶æ„è¯¦è§ [ai_agent.md#5.1.1](../ai_agent.md#511-æ•´ä½“ç³»ç»Ÿæ¶æ„)
>
> **æœ¬èŠ‚ç›®çš„**: æä¾›ç³»ç»Ÿæ¶æ„çš„å¿«é€Ÿæ¦‚è§ˆï¼Œè¯¦ç»†çš„ç»„ä»¶äº¤äº’å’ŒæŠ€æœ¯å®ç°è¯·å‚è€ƒai_agent.md

**é€»è¾‘åˆ†å±‚æ¶æ„**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¾“å…¥å±‚ (Input Layer)                            â”‚
â”‚ â€¢ Alertmanager Webhooks                         â”‚
â”‚ â€¢ K8s Event Streams                             â”‚
â”‚ â€¢ Manual Triggers (Dashboard/API)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ äº‹ä»¶ç½‘å…³å±‚ (Event Gateway Layer)                â”‚
â”‚ â€¢ Webhook Handler                               â”‚
â”‚ â€¢ Event Filter & Validator                     â”‚
â”‚ â€¢ Event Standardization                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç¼–æ’å±‚ (Orchestration Layer)                    â”‚
â”‚ â€¢ Task Scheduler                                â”‚
â”‚ â€¢ Priority Queue Manager                       â”‚
â”‚ â€¢ Workflow Engine                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ™ºèƒ½åˆ†æå±‚ (AI Analysis Layer)                  â”‚
â”‚ â€¢ Reasoning Service (LLM)                      â”‚
â”‚ â€¢ Knowledge Base (RAG)                         â”‚
â”‚ â€¢ Strategy Generator                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ‰§è¡Œå±‚ (Execution Layer)                        â”‚
â”‚ â€¢ Execution Gateway (MCP Protocol)             â”‚
â”‚ â€¢ Tool Registry                                â”‚
â”‚ â€¢ Security Validator                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¾“å‡ºå±‚ (Output Layer)                           â”‚
â”‚ â€¢ Report Generator                              â”‚
â”‚ â€¢ Notification Service (Multi-channel)         â”‚
â”‚ â€¢ Dashboard API                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 æ¶æ„ç‰¹æ€§

| ç‰¹æ€§ | è¯´æ˜ | ä¼˜åŠ¿ | ä½“ç° |
|------|------|------|------|
| **äº‹ä»¶é©±åŠ¨** | åŸºäºäº‹ä»¶çš„å¼‚æ­¥æ¶æ„ | é«˜ååã€æ¾è€¦åˆ | NATSæ¶ˆæ¯æ€»çº¿ã€å¼‚æ­¥å¤„ç† |
| **å¾®æœåŠ¡** | ç»„ä»¶ç‹¬ç«‹éƒ¨ç½²å’Œæ‰©å±• | æ˜“ç»´æŠ¤ã€å¯æ‰©å±• | 6å¤§æ ¸å¿ƒæœåŠ¡ç‹¬ç«‹è¿è¡Œ |
| **æ— çŠ¶æ€è®¾è®¡** | æœåŠ¡å®ä¾‹æ— çŠ¶æ€ | æ°´å¹³æ‰©å±•ã€é«˜å¯ç”¨ | çŠ¶æ€å­˜å‚¨åœ¨æ•°æ®å±‚ |
| **åˆ†å±‚æ¶æ„** | æ¸…æ™°çš„èŒè´£åˆ†ç¦» | æ˜“ç†è§£ã€å¯æµ‹è¯• | 6å±‚é€»è¾‘æ¶æ„è®¾è®¡ |
| **æ’ä»¶åŒ–** | å·¥å…·æ³¨å†Œè¡¨æœºåˆ¶ | æ˜“æ‰©å±•ã€å¯å®šåˆ¶ | Tool RegistryåŠ¨æ€é…ç½® |

> **æ¶æ„ä¸€è‡´æ€§è¯´æ˜**: æœ¬æ¶æ„è®¾è®¡ä¸ [ai_agent.md#5ç« ](../ai_agent.md#5-ç³»ç»Ÿè®¾è®¡-system-design) å’Œ [06_microservices.md](./06_microservices.md) ä¿æŒå®Œå…¨ä¸€è‡´

### 1.3 æŠ€æœ¯æ ˆ

è¯¦è§: [ai_agent.md#2.4](../ai_agent.md#24-è¿è¡Œç¯å¢ƒ-operating-environment)

| å±‚æ¬¡ | æŠ€æœ¯é€‰å‹ | ç‰ˆæœ¬ |
|------|----------|------|
| **ç¼–ç¨‹è¯­è¨€** | Go | 1.21+ |
| **å®¹å™¨ç¼–æ’** | Kubernetes | v1.20-v1.28 |
| **æ•°æ®åº“** | PostgreSQL | 14+ |
| **ç¼“å­˜é˜Ÿåˆ—** | Redis | 6+ |
| **å‘é‡æ•°æ®åº“** | Weaviate/Qdrant | æœ€æ–°ç¨³å®šç‰ˆ |
| **å¯†é’¥ç®¡ç†** | HashiCorp Vault | æœ€æ–°ç¨³å®šç‰ˆ |
| **AIæœåŠ¡** | OpenAI/Anthropic | GPT-4/Claude |

---

## 2. æ ¸å¿ƒç»„ä»¶

### 2.1 ç»„ä»¶èŒè´£çŸ©é˜µ

è¯¦è§: [ai_agent.md#5.1.2æ ¸å¿ƒæœåŠ¡è¯¦ç»†æ¶æ„](../ai_agent.md#512-æ ¸å¿ƒæœåŠ¡è¯¦ç»†æ¶æ„)

| ç»„ä»¶ | èŒè´£ | è¾“å…¥ | è¾“å‡º | ä¾èµ– |
|------|------|------|------|------|
| **Event Gateway** | æ¥æ”¶å’ŒéªŒè¯äº‹ä»¶ | Webhook/Event | æ ‡å‡†åŒ–äº‹ä»¶ | None |
| **Orchestrator** | ä»»åŠ¡è°ƒåº¦å’Œç¼–æ’ | æ ‡å‡†åŒ–äº‹ä»¶ | DiagnosticTask | Redis, PostgreSQL |
| **Reasoning Service** | AIæ¨ç†å’Œç­–ç•¥ç”Ÿæˆ | DiagnosticTask | ExecutionPlan | LLM, Vector DB |
| **Execution Gateway** | å®‰å…¨æ‰§è¡Œå‘½ä»¤ | ExecutionPlan | ExecutionResult | Vault, K8s API |
| **Report Service** | ç”Ÿæˆå’Œåˆ†å‘æŠ¥å‘Š | ExecutionResult | DiagnosticReport | SMTP, Slack API |
| **Knowledge Base** | å­˜å‚¨å’Œæ£€ç´¢çŸ¥è¯† | Query | RelevantDocs | Vector DB |

### 2.2 Event Gateway (äº‹ä»¶ç½‘å…³)

**åŠŸèƒ½**: ç»Ÿä¸€æ¥æ”¶å’Œå¤„ç†å„ç±»è¾“å…¥äº‹ä»¶

**å­ç»„ä»¶**:
- Webhook Handler: å¤„ç†HTTP webhookè¯·æ±‚
- Event Filter: è¿‡æ»¤å’Œå»é‡äº‹ä»¶
- Schema Validator: éªŒè¯äº‹ä»¶æ ¼å¼
- Event Publisher: å‘å¸ƒåˆ°å†…éƒ¨äº‹ä»¶æ€»çº¿

**å…³é”®æ¥å£**:

```go
type EventGateway interface {
    ReceiveWebhook(ctx context.Context, payload []byte) error
    ReceiveK8sEvent(ctx context.Context, event K8sEvent) error
    ValidateEvent(event Event) error
    PublishEvent(event StandardizedEvent) error
}
```

**é…ç½®å‚æ•°**:
- `webhook_timeout`: webhookå¤„ç†è¶…æ—¶æ—¶é—´ (é»˜è®¤: 30s)
- `max_payload_size`: æœ€å¤§è½½è·å¤§å° (é»˜è®¤: 10MB)
- `deduplication_window`: å»é‡æ—¶é—´çª—å£ (é»˜è®¤: 5åˆ†é’Ÿ)

### 2.3 Orchestrator (ç¼–æ’å™¨)

**åŠŸèƒ½**: ä»»åŠ¡è°ƒåº¦ã€ä¼˜å…ˆçº§ç®¡ç†ã€æµç¨‹æ§åˆ¶

è¯¦è§: [ai_agent.md#5.3.1](../ai_agent.md#531-ä»»åŠ¡çŠ¶æ€ç®¡ç†)

**å­ç»„ä»¶**:
- Task Scheduler: ä»é˜Ÿåˆ—å–å‡ºä»»åŠ¡
- Priority Manager: ç®¡ç†ä»»åŠ¡ä¼˜å…ˆçº§
- Workflow Engine: æ§åˆ¶è¯Šæ–­æµç¨‹
- State Manager: ç®¡ç†ä»»åŠ¡çŠ¶æ€

**çŠ¶æ€æœº**:

```
pending â†’ running â†’ [completed | failed | timeout | cancelled]
```

**ä¼˜å…ˆçº§ç®—æ³•**:

```go
priority = base_priority(severity)
         + cluster_weight
         + namespace_weight
         + historical_frequency_factor
```

### 2.4 Reasoning Service (æ¨ç†æœåŠ¡)

**åŠŸèƒ½**: AIé©±åŠ¨çš„æ™ºèƒ½è¯Šæ–­å’Œç­–ç•¥ç”Ÿæˆ

è¯¦è§: [ai_agent.md#5.9.2](../ai_agent.md#592-è¯Šæ–­ç­–ç•¥é€‰æ‹©é€»è¾‘-diagnostic-strategy-selection)

**æ ¸å¿ƒèƒ½åŠ›**:
- çŸ¥è¯†åº“è¯­ä¹‰æ£€ç´¢ (RAG)
- LLMæ¨ç†å’Œåˆ†æ
- æ‰§è¡Œè®¡åˆ’ç”Ÿæˆ
- ç½®ä¿¡åº¦è¯„ä¼°

**å·¥ä½œæµç¨‹**:

```
1. æ¥æ”¶è¯Šæ–­ä»»åŠ¡
2. æŸ¥è¯¢çŸ¥è¯†åº“ (ç›¸ä¼¼åº¦æ£€ç´¢)
3. æ„å»ºLLMä¸Šä¸‹æ–‡ (ä»»åŠ¡+çŸ¥è¯†+å†å²)
4. ç”Ÿæˆè¯Šæ–­ç­–ç•¥
5. åˆ›å»ºæ‰§è¡Œè®¡åˆ’
6. è¿”å›æ‰§è¡Œè®¡åˆ’
```

**æ¨¡å‹é€‰æ‹©ç­–ç•¥**:

```go
if knowledge_match_score >= 0.8 {
    strategy = "knowledge_based"  // ç›´æ¥ä½¿ç”¨çŸ¥è¯†åº“
} else if ai_available && budget_ok {
    if complexity >= 7 {
        model = "gpt-4"  // å¤æ‚é—®é¢˜
    } else {
        model = "gpt-3.5-turbo"  // ç®€å•é—®é¢˜
    }
} else {
    strategy = "rule_based"  // é™çº§åˆ°è§„åˆ™å¼•æ“
}
```

### 2.5 Execution Gateway (æ‰§è¡Œç½‘å…³)

**åŠŸèƒ½**: å®‰å…¨æ‰§è¡Œè¯Šæ–­å‘½ä»¤

è¯¦è§: [ai_agent.md#5.4](../ai_agent.md#54-å·¥å…·ä¸èƒ½åŠ›-tools--capabilities)

**5å±‚å®‰å…¨æ£€æŸ¥**:

```
1. å·¥å…·æ³¨å†Œè¡¨éªŒè¯ (å‘½ä»¤å¿…é¡»å·²æ³¨å†Œ)
2. åªè¯»æ“ä½œæ£€æŸ¥ (ç¦æ­¢ç ´åæ€§æ“ä½œ)
3. å‚æ•°å®‰å…¨éªŒè¯ (æ— å±é™©å‚æ•°)
4. æƒé™éªŒè¯ (RBACæ£€æŸ¥)
5. é›†ç¾¤æƒé™éªŒè¯ (cluster_idåŒ¹é…)
```

**MCPåè®®å®ç°**:

```go
type MCPServer interface {
    ExecuteCommand(ctx context.Context, cmd Command) (*Result, error)
    ValidateCommand(cmd Command) error
    GetCredentials(clusterID string) (*Credentials, error)
}
```

**åŠ¨æ€å‡­è¯è·å–**:

è¯¦è§: [ai_agent.md#5.5.2](../ai_agent.md#552-åŠ¨æ€å‡­è¯è·å–æµç¨‹)

```
1. ä»ä»»åŠ¡ä¸­æå– cluster_id
2. å‘Vaultè¯·æ±‚çŸ­æœŸToken (1å°æ—¶æœ‰æ•ˆ)
3. ä½¿ç”¨Tokenå»ºç«‹K8sè¿æ¥
4. æ‰§è¡Œå‘½ä»¤
5. æ¸…ç†ä¸´æ—¶å‡­è¯
```

### 2.6 Knowledge Base (çŸ¥è¯†åº“)

**åŠŸèƒ½**: è¿ç»´çŸ¥è¯†çš„å­˜å‚¨å’Œæ£€ç´¢

è¯¦è§: [ai_agent.md#6.4](../ai_agent.md#64-çŸ¥è¯†åº“æ¨¡å‹-knowledge-base-model)

**å­˜å‚¨æ¶æ„**:

```
PostgreSQL (å…ƒæ•°æ®)
    â”œâ”€ knowledge_entries (çŸ¥è¯†æ¡ç›®)
    â”œâ”€ knowledge_categories (åˆ†ç±»)
    â”œâ”€ knowledge_tags (æ ‡ç­¾)
    â””â”€ knowledge_versions (ç‰ˆæœ¬)

Vector DB (å‘é‡ç´¢å¼•)
    â”œâ”€ embeddings (768ç»´å‘é‡)
    â”œâ”€ similarity_index (HNSWç´¢å¼•)
    â””â”€ metadata (å…ƒæ•°æ®å…³è”)
```

**æ£€ç´¢æµç¨‹**:

```
1. æŸ¥è¯¢æ–‡æœ¬å‘é‡åŒ– (Embedding)
2. å‘é‡ç›¸ä¼¼åº¦æœç´¢ (Top-K)
3. å…ƒæ•°æ®è¿‡æ»¤ (cluster_type, k8s_version)
4. ç½®ä¿¡åº¦è¯„åˆ†
5. è¿”å›ç›¸å…³çŸ¥è¯†
```

**æ›´æ–°ç­–ç•¥**:

è¯¦è§: [ai_agent.md#5.9.5](../ai_agent.md#595-çŸ¥è¯†åº“æ›´æ–°å†³ç­–-knowledge-base-update-decision)

---

## 3. å¤šé›†ç¾¤æ¶æ„

### 3.1 å¤šé›†ç¾¤ç®¡ç†æ¨¡å¼

è¯¦è§: [ai_agent.md#5.5](../ai_agent.md#55-å¤šé›†ç¾¤ç®¡ç†ç­–ç•¥-multi-cluster-management-strategy)

**è®¾è®¡åŸåˆ™**:
- ğŸ¢ **ä¸­å¤®åŒ–ç®¡ç†**: å•ä¸€æ§åˆ¶å¹³é¢
- ğŸŒ **åˆ†å¸ƒå¼æ‰§è¡Œ**: æ¯ä¸ªé›†ç¾¤ç‹¬ç«‹æ‰§è¡Œ
- ğŸ” **å‡­è¯éš”ç¦»**: ä¸åŒé›†ç¾¤å‡­è¯ä¸¥æ ¼éš”ç¦»
- ğŸ“š **çŸ¥è¯†å…±äº«**: å…¨å±€çŸ¥è¯†åº“è·¨é›†ç¾¤å¤ç”¨

### 3.2 å¤šé›†ç¾¤æ¶æ„å›¾

å®Œæ•´æ¶æ„å›¾å‚è§: [ai_agent.md#5.5.1](../ai_agent.md#551-å¤šé›†ç¾¤æ¶æ„å›¾)

```
ä¸­å¤®ç®¡ç†å¹³å° (Central Platform)
    â”œâ”€ Orchestrator
    â”œâ”€ Reasoning Service
    â”œâ”€ Execution Gateway
    â””â”€ Shared Data Layer
        â”œâ”€ PostgreSQL (ä»»åŠ¡å…ƒæ•°æ®)
        â”œâ”€ Redis (ä»»åŠ¡é˜Ÿåˆ—)
        â”œâ”€ Vector DB (å…¨å±€çŸ¥è¯†åº“)
        â””â”€ Vault (å‡­è¯ç®¡ç†)
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
         â”‚              â”‚              â”‚
    Cluster A      Cluster B      Cluster C
    (prod-us)      (prod-eu)      (staging)
```

### 3.3 é›†ç¾¤æ³¨å†Œä¸é…ç½®

è¯¦è§: [ai_agent.md#5.5.3](../ai_agent.md#553-é›†ç¾¤æ³¨å†Œä¸é…ç½®ç®¡ç†)

**é…ç½®ç¤ºä¾‹**:

```yaml
clusters:
  - id: "prod-us-west"
    name: "Production US West"
    region: "us-west-2"
    environment: "production"
    vault_path: "kubernetes/prod-us-west"
    monitoring:
      alertmanager_url: "https://alertmanager.prod-us-west.com"
    access_control:
      max_concurrent_tasks: 10
      allowed_operations: ["get", "list", "describe", "logs"]
      rate_limit: "100/hour"
```

### 3.4 è·¨é›†ç¾¤è¯Šæ–­æµç¨‹

è¯¦è§: [ai_agent.md#3.2.3](../ai_agent.md#323-å¤šé›†ç¾¤åè°ƒæµç¨‹-multi-cluster-coordination)

```
1. ä¸­å¤®è°ƒåº¦å™¨æ¥æ”¶ä»»åŠ¡
2. æ ¹æ®cluster_idè·¯ç”±åˆ°ç›®æ ‡é›†ç¾¤
3. æ‰§è¡Œç½‘å…³è·å–åŠ¨æ€å‡­è¯
4. é€šè¿‡MCPä»£ç†æ‰§è¡Œå‘½ä»¤
5. æ”¶é›†ç»“æœå¹¶æ±‡èš
6. ç”Ÿæˆç»Ÿä¸€è¯Šæ–­æŠ¥å‘Š
```

---

## 4. æ•°æ®æµæ¶æ„

### 4.1 ç«¯åˆ°ç«¯æ•°æ®æµ

è¯¦è§: [ai_agent.md#5.6](../ai_agent.md#56-æ•°æ®æµå‘ä¸å¤„ç†æ¶æ„-data-flow--processing-architecture)

```
æ•°æ®è¾“å…¥å±‚
    â†“ (JSON payload)
æ•°æ®æ ‡å‡†åŒ–å±‚
    â†“ (StandardizedEvent)
ä»»åŠ¡ç¼–æ’å±‚
    â†“ (DiagnosticTask)
æ™ºèƒ½å¤„ç†å±‚
    â†“ (ExecutionPlan)
å®‰å…¨æ‰§è¡Œå±‚
    â†“ (ExecutionResult)
åˆ†æå†³ç­–å±‚
    â†“ (DiagnosticAnalysis)
è¾“å‡ºç”Ÿæˆå±‚
    â†“ (DiagnosticReport)
åé¦ˆé—­ç¯
    â†“ (UserFeedback â†’ Knowledge Base)
```

### 4.2 æ•°æ®æŒä¹…åŒ–æ¶æ„

è¯¦è§: [ai_agent.md#5.6.2](../ai_agent.md#562-æ•°æ®æŒä¹…åŒ–æ¶æ„)

**å­˜å‚¨åˆ†å±‚**:

```
åº”ç”¨å±‚ (Services)
    â†“
ç¼“å­˜å±‚ (Redis Cluster)
    â”œâ”€ ä»»åŠ¡é˜Ÿåˆ— (LIST)
    â”œâ”€ ä¼šè¯çŠ¶æ€ (HASH)
    â”œâ”€ æŸ¥è¯¢ç¼“å­˜ (STRING, TTL 1h)
    â””â”€ é…ç½®ç¼“å­˜ (JSON)
    â†“
æŒä¹…åŒ–å±‚
    â”œâ”€ PostgreSQL (å…³ç³»å‹æ•°æ®)
    â”‚   â”œâ”€ diagnostic_tasks
    â”‚   â”œâ”€ diagnostic_steps
    â”‚   â”œâ”€ diagnostic_results
    â”‚   â”œâ”€ user_feedback
    â”‚   â”œâ”€ audit_logs
    â”‚   â””â”€ system_config
    â”‚
    â”œâ”€ Vector DB (å‘é‡ç´¢å¼•)
    â”‚   â”œâ”€ knowledge_entries
    â”‚   â”œâ”€ embeddings (768d)
    â”‚   â””â”€ similarity_index (HNSW)
    â”‚
    â””â”€ HashiCorp Vault (å¯†é’¥ç®¡ç†)
        â”œâ”€ cluster_credentials
        â”œâ”€ api_tokens
        â””â”€ encryption_keys
```

### 4.3 æ•°æ®ä¸€è‡´æ€§æ¨¡å‹

è¯¦è§: [ai_agent.md#5.7.3](../ai_agent.md#573-æ•°æ®ä¸€è‡´æ€§ä¿è¯æœºåˆ¶-data-consistency-guarantees)

**å¼ºä¸€è‡´æ€§** (PostgreSQLäº‹åŠ¡):
- ä»»åŠ¡çŠ¶æ€å˜æ›´
- å®¡è®¡æ—¥å¿—å†™å…¥
- å…³é”®é…ç½®æ›´æ–°

**æœ€ç»ˆä¸€è‡´æ€§** (ç¼“å­˜+æ•°æ®åº“):
- çŸ¥è¯†åº“æ›´æ–° (1-5åˆ†é’Ÿå»¶è¿Ÿ)
- ç»Ÿè®¡æŒ‡æ ‡æ›´æ–° (5-10åˆ†é’Ÿå»¶è¿Ÿ)
- ç›‘æ§æ•°æ®åŒæ­¥ (15ç§’å»¶è¿Ÿ)

---

## 5. å®‰å…¨æ¶æ„

### 5.1 å®‰å…¨åˆ†å±‚è®¾è®¡

è¯¦è§: [ai_agent.md#10ç« ](../ai_agent.md#10-å®‰å…¨è€ƒé‡)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¾¹ç•Œå±‚: è®¤è¯ã€æˆæƒã€ç½‘ç»œéš”ç¦»             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åº”ç”¨å±‚: åªè¯»çº¦æŸã€å‘½ä»¤ç™½åå•ã€å‚æ•°éªŒè¯   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ•°æ®å±‚: åŠ å¯†ä¼ è¾“ã€åŠ å¯†å­˜å‚¨ã€æ•°æ®è„±æ•     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å®¡è®¡å±‚: å®Œæ•´æ—¥å¿—ã€è¡Œä¸ºè¿½è¸ªã€åˆè§„æ£€æŸ¥     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 è®¤è¯ä¸æˆæƒ

**èº«ä»½è®¤è¯**: OIDC/OAuth2.0
**æƒé™æ§åˆ¶**: RBAC (åŸºäºè§’è‰²)

**æƒé™æ¨¡å‹**:

```
User
  â”œâ”€ has Roles
  â”‚   â”œâ”€ Admin (ç®¡ç†å‘˜)
  â”‚   â”œâ”€ Operator (è¿ç»´å·¥ç¨‹å¸ˆ)
  â”‚   â”œâ”€ Developer (å¼€å‘å·¥ç¨‹å¸ˆ)
  â”‚   â””â”€ Viewer (åªè¯»ç”¨æˆ·)
  â”‚
  â””â”€ has Permissions
      â”œâ”€ clusters:read
      â”œâ”€ tasks:create
      â”œâ”€ tasks:read
      â”œâ”€ tasks:control
      â”œâ”€ knowledge:read
      â””â”€ knowledge:write
```

### 5.3 æ•°æ®å®‰å…¨

**ä¼ è¾“åŠ å¯†**: TLS 1.3
**å­˜å‚¨åŠ å¯†**: AES-256
**æ•æ„Ÿæ•°æ®è„±æ•**: è‡ªåŠ¨è¯†åˆ«å’Œè„±æ•

**è„±æ•è§„åˆ™**:

```go
var SensitivePatterns = []string{
    `password\s*[:=]\s*\S+`,     // å¯†ç 
    `secret\s*[:=]\s*\S+`,       // å¯†é’¥
    `token\s*[:=]\s*\S+`,        // Token
    `api[_-]?key\s*[:=]\s*\S+`,  // API Key
    `\d{3}-\d{2}-\d{4}`,         // SSN
    `\d{4}[\s-]?\d{4}[\s-]?\d{4}[\s-]?\d{4}`, // ä¿¡ç”¨å¡
}
```

### 5.4 ç½‘ç»œå®‰å…¨

**ç½‘ç»œç­–ç•¥**: K8s NetworkPolicy
**æœåŠ¡ç½‘æ ¼**: Istio (å¯é€‰)
**å…¥å£æ§åˆ¶**: Ingress with mTLS

**ç½‘ç»œéš”ç¦»**:

```
Internet
    â†“ (TLS termination)
Ingress Controller
    â†“ (mTLS)
API Gateway (è®¤è¯/æˆæƒ)
    â†“ (å†…éƒ¨ç½‘ç»œ)
Backend Services
    â†“ (mTLS)
Data Stores
```

---

## 6. å…³é”®è®¾è®¡å†³ç­–

### 6.1 ä¸ºä»€ä¹ˆé€‰æ‹©äº‹ä»¶é©±åŠ¨æ¶æ„?

**ä¼˜åŠ¿**:
- âœ… é«˜ååé‡: å¼‚æ­¥å¤„ç†æé«˜å¹¶å‘èƒ½åŠ›
- âœ… æ¾è€¦åˆ: ç»„ä»¶ç‹¬ç«‹æ¼”è¿›
- âœ… å¯æ‰©å±•: æ˜“äºæ·»åŠ æ–°çš„äº‹ä»¶å¤„ç†å™¨
- âœ… å¼¹æ€§: æ•…éšœéš”ç¦»å’Œæ¢å¤

**æƒè¡¡**:
- âš ï¸ å¤æ‚æ€§: è°ƒè¯•å’Œè¿½è¸ªæ›´å›°éš¾
- âš ï¸ ä¸€è‡´æ€§: éœ€è¦å¤„ç†æœ€ç»ˆä¸€è‡´æ€§

### 6.2 ä¸ºä»€ä¹ˆé€‰æ‹©åªè¯»æ‰§è¡Œæ¨¡å¼?

è¯¦è§: [ai_agent.md#3.6.2](../ai_agent.md#362-æŠ€æœ¯çº¦æŸ-technical-constraints)

**åŸå› **:
- ğŸ›¡ï¸ å®‰å…¨: é˜²æ­¢AIè¯¯æ“ä½œç ´åç”Ÿäº§ç¯å¢ƒ
- ğŸ“‹ åˆè§„: ç¬¦åˆå®¡è®¡å’Œå˜æ›´ç®¡ç†è¦æ±‚
- ğŸ” ä¸“æ³¨: èšç„¦è¯Šæ–­è€Œéè‡ªåŠ¨ä¿®å¤

**å®ç°**:
- 5å±‚å®‰å…¨æ£€æŸ¥æœºåˆ¶
- å‘½ä»¤ç™½åå•
- å‚æ•°å®‰å…¨éªŒè¯

### 6.3 ä¸ºä»€ä¹ˆä½¿ç”¨åŠ¨æ€å‡­è¯?

è¯¦è§: [ai_agent.md#5.5.2](../ai_agent.md#552-åŠ¨æ€å‡­è¯è·å–æµç¨‹)

**ä¼˜åŠ¿**:
- ğŸ” å®‰å…¨: çŸ­æœŸToken (1å°æ—¶)
- ğŸ”„ åŠ¨æ€: æŒ‰éœ€è·å–ï¼Œç”¨åå³å¼ƒ
- ğŸ“Š å®¡è®¡: æ¯æ¬¡è®¿é—®å¯è¿½è¸ª
- ğŸš« éš”ç¦»: ä¸æŒä¹…åŒ–é•¿æœŸå‡­è¯

**å®ç°**: HashiCorp Vault + K8s Service Account

### 6.4 ä¸ºä»€ä¹ˆé‡‡ç”¨ä¸­å¤®åŒ–+åˆ†å¸ƒå¼æ¨¡å¼?

è¯¦è§: [ai_agent.md#5.5](../ai_agent.md#55-å¤šé›†ç¾¤ç®¡ç†ç­–ç•¥-multi-cluster-management-strategy)

**ä¸­å¤®åŒ–**:
- ç»Ÿä¸€è°ƒåº¦å’Œç®¡ç†
- å…¨å±€çŸ¥è¯†åº“å…±äº«
- ç®€åŒ–è¿ç»´

**åˆ†å¸ƒå¼**:
- é™ä½ç½‘ç»œå»¶è¿Ÿ
- æé«˜å®¹é”™èƒ½åŠ›
- æ”¯æŒå¤§è§„æ¨¡æ‰©å±•

### 6.5 ä¸ºä»€ä¹ˆé€‰æ‹©RAGè€Œéçº¯LLM?

**RAGä¼˜åŠ¿**:
- ğŸ“š çŸ¥è¯†å¢å¼º: ç»“åˆä¸“ä¸šè¿ç»´çŸ¥è¯†
- ğŸ¯ å‡†ç¡®æ€§: æé«˜è¯Šæ–­å‡†ç¡®ç‡
- ğŸ’° æˆæœ¬: å‡å°‘LLM Tokenæ¶ˆè€—
- ğŸ”„ å¯æ›´æ–°: çŸ¥è¯†åº“æŒç»­æ¼”è¿›

**å®ç°**: Vector DB + Semantic Search + LLM

### 6.6 æ¶æ„æ¼”è¿›è·¯çº¿

è¯¦è§: [ai_agent.md#11ç« ](../ai_agent.md#11-è¿­ä»£è·¯çº¿å›¾-roadmap)

**v1.6 (å½“å‰)**: å¤šé›†ç¾¤ç®¡ç† + æˆæœ¬æ§åˆ¶
**v1.7 (è®¡åˆ’)**: å¢å¼ºAIèƒ½åŠ› + è‡ªåŠ¨ä¿®å¤å»ºè®®
**v1.8 (è®¡åˆ’)**: å¤šäº‘æ”¯æŒ + è¾¹ç¼˜éƒ¨ç½²
**v2.0 (æ„¿æ™¯)**: è‡ªä¸»ä¿®å¤ + é¢„æµ‹æ€§ç»´æŠ¤

---

## ç›¸å…³æ–‡æ¡£

- [éœ€æ±‚è§„æ ¼](../REQUIREMENTS.md) - åŠŸèƒ½å’ŒéåŠŸèƒ½éœ€æ±‚
- [æ•°æ®æ¨¡å‹](./03_data_models.md) - æ ¸å¿ƒæ•°æ®ç»“æ„
- [éƒ¨ç½²æŒ‡å—](./04_deployment.md) - éƒ¨ç½²å’Œé…ç½®
- [å®‰å…¨è®¾è®¡](../ai_agent.md#10-å®‰å…¨è€ƒé‡) - è¯¦ç»†å®‰å…¨è®¾è®¡

---

**æ–‡æ¡£ç»´æŠ¤**: Aetheriusæ¶æ„å›¢é˜Ÿ
**æœ€åæ›´æ–°**: 2025å¹´9æœˆ28æ—¥